{% extends 'base.html' %}

{% block content %}
<section class="hero">
    <div class="hero-content">
        {% if settings and settings.upcoming_drop %}
        <div class="upcoming-drop-banner"
            style="margin-bottom: 1rem; background: rgba(0,0,0,0.6); padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid var(--primary-color);">
            <h3 style="margin:0; font-size: 1.2rem; color: var(--primary-color);">NEXT DROP: {{ settings.upcoming_drop
                }}</h3>
        </div>
        {% endif %}
        <h1>Rhyma</h1>
        <p class="tagline">Defining the New Sound of Luxury</p>
        <a href="{{ url_for('music') }}" class="cta-button">Listen Now</a>
    </div>
</section>

<section class="featured-preview">
    <div class="container">
        <h2>Latest Single</h2>
        <div class="spotify-embed-container" style="display: flex; justify-content: center; margin-bottom: 2rem;">
            {% if settings and settings.latest_release_id %}
            <iframe style="border-radius:12px"
                src="https://open.spotify.com/embed/album/{{ settings.latest_release_id }}?utm_source=generator&theme=0"
                width="100%" height="352" frameBorder="0" allowfullscreen=""
                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                loading="lazy"></iframe>
            {% else %}
            <iframe style="border-radius:12px"
                src="https://open.spotify.com/embed/track/2FJGPXuJs9809AdKZ7fGPj?utm_source=generator&theme=0"
                width="100%" height="352" frameBorder="0" allowfullscreen=""
                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                loading="lazy"></iframe>
            {% endif %}
        </div>

        <div class="album-section">
            <div class="album-title-header">
                <h3 id="album-title">Album Title</h3>
            </div>
            <div class="album-images-container">
                <div class="album-item" style="width: 300px;">
                    <iframe style="border-radius:12px"
                        src="https://open.spotify.com/embed/album/11G7xf6VQHjhSSCtW6FRdt?utm_source=generator"
                        width="100%" height="352" frameBorder="0" allowfullscreen=""
                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                        loading="lazy"></iframe>
                </div>
                <div class="album-item" style="width: 300px;">
                    <iframe style="border-radius:12px"
                        src="https://open.spotify.com/embed/album/3YUXPunrRpyRj2zv3ufbEQ?utm_source=generator"
                        width="100%" height="352" frameBorder="0" allowfullscreen=""
                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                        loading="lazy"></iframe>
                </div>
            </div>
        </div>

        <div class="release-info">
            <p>Out Now on All Platforms</p>
            <a href="https://youtube.com/rhymangn" target="_blank" class="text-link">Stream on YouTube <i
                    class="fa-brands fa-youtube"></i> &rarr;</a>
        </div>
    </div>

    <!-- Modal for album management -->
    <div id="album-modal" class="album-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Album Management</h3>
            <div class="modal-options">
                <button class="modal-btn" data-action="add">1. Add new album title</button>
                <button class="modal-btn" data-action="change">2. Change album title</button>
                <button class="modal-btn" data-action="remove">3. Remove album title</button>
            </div>
        </div>
    </div>

    <!-- Change album title modal -->
    <div id="change-album-modal" class="album-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Change Album Title</h3>
            <p>Select the album title you want to change it to:</p>
            <select id="album-select">
                <option value="">-- Select Album --</option>
            </select>
            <div class="modal-section">
                <label for="change-image-input">Select Image:</label>
                <input type="file" id="change-image-input" accept="image/*" multiple>
                <div id="change-selected-images" class="selected-images-preview"></div>
            </div>
            <button id="confirm-change-btn" class="modal-btn">Confirm</button>
        </div>
    </div>

    <!-- Add new album title modal -->
    <div id="add-album-modal" class="album-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Add New Album Title</h3>
            <input type="text" id="new-album-input" placeholder="Enter new album title">
            <div class="modal-section">
                <label for="add-image-input">Select Images:</label>
                <input type="file" id="add-image-input" accept="image/*" multiple>
                <div id="add-selected-images" class="selected-images-preview"></div>
            </div>
            <button id="confirm-add-btn" class="modal-btn">Add Album</button>
        </div>
    </div>
</section>



{% endblock %}